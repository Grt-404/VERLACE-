<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VERLACE | Shop</title>
  <link rel="stylesheet" href="/stylesheets/shop.css" />
</head>

<body>
  <% if (success.length > 0) { %>
    <div class="success">
      <span><%= success %></span>
    </div>
  <% } %>

  <!-- Header / Navbar -->
  <header class="topbar">
    <div class="logo">
      <a href="/" class="brand-name">VERLACE</a>
    </div>
    <nav class="nav-links">
      <a href="/shop">Shop</a>
      <a href="/cart">Cart</a>
      <a href="/users/myAccount">My Account</a>
      <a href="/users/logout">Logout</a>
    </nav>
  </header>

  <div class="shop-container">

    <!-- Hero Section -->
    <section class="hero">
      <h1 class="hero-title">Timeless Elegance, Redefined</h1>
      <p class="hero-subtitle">
        Explore our premium collection â€” curated with craftsmanship and a passion for luxury.
      </p>
    </section>

    <!-- Shop Content -->
    <div class="shop-content">

      <!-- Sidebar -->
      <aside class="sidebar">
        <h2>Filters</h2>

   <form method = "post", action = "/sort">
  <label for="sort">Sort by:</label>
  <select name="sort" id="sort" onchange="this.form.submit()">
    <option value="">Sort by</option>
    <option value="price_asc">Price: Low to High</option>
    <option value="price_desc">Price: High to Low</option>
  </select>
</form>


        <div class="filter-block">
          <h3>Categories</h3>
          <ul>
            <li><a href="/latest">New Collection</a></li>
            <li><a href="/shop">All Products</a></li>
            <li><a href="/discount">Discounted</a></li>
          </ul>
        </div>

        <div class="filter-block">
          <h3>Filter by</h3>
          <ul>
            <li><a href="/shop">Availability</a></li>
            <li><a href="/discount">Discount</a></li>
          </ul>
        </div>
      </aside>

      <!-- Product Grid -->
      <main class="product-grid">

        <% products.forEach(product => { %>
          <div class="product-card" style="background-color: <%= product.panelcolor %>;">
            
            <!-- Product Image -->
            <div class="product-img" style="background-color: <%= product.bgcolor %>;">
              <img 
                src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" 
                alt="<%= product.name %>" 
                />
            </div>

            <!-- Product Details -->
            <div class="product-details">
              <div class="text" style="color: <%= product.textcolor %>;">
                <h3><%= product.name %></h3>
                <p style="color: <%= product.textcolor %>;">&#8377;<%= product.price %></p>
              </div>
              <a class="add-btn" href="/addToCart/<%= product._id %>">
                <span>+</span>
              </a>
            </div>

          </div>
        <% }) %>
      </main>

    </div> <!-- End .shop-content -->
  </div> <!-- End .shop-container -->

  <script src="/javascripts/shop.js"></script>
</body>

</html>
